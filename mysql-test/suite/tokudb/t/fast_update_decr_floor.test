# generated by tokudb_update_decr_floor.py
source include/have_tokudb.inc;
source include/have_innodb.inc;
set default_storage_engine='tokudb';
disable_warnings;
drop table if exists t;
enable_warnings;
set tokudb_disable_slow_update=1;
SET SESSION sql_mode=(SELECT REPLACE(@@sql_mode,'STRICT_TRANS_TABLES',''));
SET SESSION sql_mode=(SELECT REPLACE(@@sql_mode,'STRICT_ALL_TABLES',''));
create table tt (
    id tinyint  primary key,
    x tinyint  null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id tinyint  primary key,
    x tinyint  not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id tinyint unsigned primary key,
    x tinyint unsigned null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id tinyint unsigned primary key,
    x tinyint unsigned not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id smallint  primary key,
    x smallint  null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id smallint  primary key,
    x smallint  not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id smallint unsigned primary key,
    x smallint unsigned null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id smallint unsigned primary key,
    x smallint unsigned not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id mediumint  primary key,
    x mediumint  null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id mediumint  primary key,
    x mediumint  not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id mediumint unsigned primary key,
    x mediumint unsigned null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id mediumint unsigned primary key,
    x mediumint unsigned not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id int  primary key,
    x int  null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id int  primary key,
    x int  not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id int unsigned primary key,
    x int unsigned null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id int unsigned primary key,
    x int unsigned not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id bigint  primary key,
    x bigint  null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id bigint  primary key,
    x bigint  not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
replace_regex /MariaDB/XYZ/ /MySQL/XYZ/;
error ER_UNSUPPORTED_EXTENSION;
update noar tt set x=if(x=0,0,x-1) where id=1;
drop table tt, ti;
create table tt (
    id bigint unsigned primary key,
    x bigint unsigned null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
create table tt (
    id bigint unsigned primary key,
    x bigint unsigned not null
);
insert into tt values (1,4);
create table ti like tt;
alter table ti engine=innodb;
insert into ti select * from tt;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
# try to decrement when x=0
update noar tt set x=if(x=0,0,x-1) where id=1;
update noar ti set x=if(x=0,0,x-1) where id=1;
let $diff_tables = test.tt, test.ti;
source include/diff_tables.inc;
drop table tt, ti;
