SET @debug_save= @@GLOBAL.DEBUG;
CREATE DATABASE test1;
SET @@GLOBAL.DEBUG= '+d,simulate_failure_in_before_commit_hook';
DROP DATABASE test1;
ERROR HY000: Error on observer while running replication hook 'before_commit'.
SET @@GLOBAL.DEBUG= @debug_save;
DROP DATABASE test1;
CREATE TABLE t1(a INT NOT NULL);
SET @@GLOBAL.DEBUG= '+d,simulate_failure_in_before_commit_hook';
DROP TABLE t1;
ERROR HY000: Error on observer while running replication hook 'before_commit'.
SET @@GLOBAL.DEBUG= @debug_save;
DROP table t1;
